<ng-container *ngIf="dataLoadedOrNew; else defaulContent">
    <div class="row no-gutters">
        <div class="col-6 ps-2 pe-1 pt-2 pb-2">
            <!-- Stammdaten -->
            <app-card>
                <div card-header>Stammdaten</div>
                <div card-body>
                    <form [formGroup]="userProfilesForm">
                        <!-- Row 1: GP-Nr and Anrede -->
                        <div class="row ">
                            <div class="col-6 pe-1" formGroupName="employee_details">
                                <label 
                                    for="vp_nr" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['employee_details.vp_nr']"
                                >GP-Nr</label>
                                <input 
                                    type="text" 
                                    class="form-control form-control-sm is-invalid" 
                                    [class.is-invalid]="userProfilesForm.get('employee_details.vp_nr')?.errors && userProfilesForm.get('employee_details.vp_nr')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.vp_nr')?.errors && userProfilesForm.get('employee_details.vp_nr')?.touched"
                                    id="vp_nr" 
                                    formControlName="vp_nr"
                                >
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('employee_details.vp_nr')?.errors?.['required']"
                                >
                                    GP-Nr ist erforderlich.
                                </div>
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('employee_details.vp_nr')?.errors?.['pattern']"
                                >
                                    Nur Zahlen sind erlaubt.
                                </div>
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('employee_details.vp_nr')?.errors?.['vpNrExists']"
                                >
                                    Die GP-Nr. ist bereits vergeben
                                </div>
                            </div>
                            <div class="col-6 ps-1" formGroupName="employee_details">
                                <label 
                                    for="egon_nr" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['employee_details.egon_nr']"
                                >Egon-Nr</label>
                                <input 
                                    type="text" 
                                    class="form-control form-control-sm is-invalid" 
                                    [class.is-invalid]="userProfilesForm.get('employee_details.egon_nr')?.errors && userProfilesForm.get('employee_details.egon_nr')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.egon_nr')?.errors && userProfilesForm.get('employee_details.egon_nr')?.touched"
                                    id="egon_nr" 
                                    formControlName="egon_nr"
                                >
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('employee_details.egon_nr')?.errors?.['required']"
                                >
                                    Egon-Nr ist erforderlich.
                                </div>
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('employee_details.egon_nr')?.errors?.['pattern']"
                                >
                                    Nur Zahlen sind erlaubt.
                                </div>
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('employee_details.egon_nr')?.errors?.['egonNrExists']"
                                >
                                    Die Egon-Nr. ist bereits vergeben
                                </div>
                            </div>                                               
                        </div>
                        <div class="row">
                            <div class="col-6 pe-1 ">
                                <label 
                                    for="anrede" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['salutation']"
                                >Anrede</label>
                                <select 
                                    id="anrede" 
                                    class="form-select form-select-sm"
                                    formControlName="salutation"
                                    [class.is-invalid]="userProfilesForm.get('salutation')?.errors && userProfilesForm.get('salutation')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('salutation')?.errors && userProfilesForm.get('salutation')?.touched"
                                >
                                    <option value="Herr">Herr</option>
                                    <option value="Frau">Frau</option>
                                    <option value="Familie">Familie</option>
                                </select>
                            </div>
                            <div class="col-6 ps-1">
                                <label 
                                    for="title" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['title']"
                                >Titel</label>
                                <select 
                                    id="title" 
                                    class="form-select form-select-sm"
                                    formControlName="title"
                                    [class.is-invalid]="userProfilesForm.get('title')?.errors && userProfilesForm.get('title')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('title')?.errors && userProfilesForm.get('title')?.touched"
                                >
                                    <option value="kein Titel">kein Titel</option>
                                    <option value="Dr.">Dr.</option>
                                    <option value="Prof.">Prof.</option>
                                    <option value="Prof.Dr.">Prof.Dr.</option>
                                </select>
                            </div>
                        </div>
                        <!-- Row 2: Name and Vorname -->
                        <div class="row">
                            
                            <div class="col-6 pe-1">
                                <label 
                                    for="first_name" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['first_name']"
                                >Vorname</label>
                                <input 
                                    type="text" 
                                    class="form-control form-control-sm" 
                                    id="first_name" 
                                    formControlName="first_name"
                                    [class.is-invalid]="userProfilesForm.get('first_name')?.errors && userProfilesForm.get('first_name')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('first_name')?.errors && userProfilesForm.get('first_name')?.touched"
                                >
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('first_name')?.errors?.['required']"
                                >
                                    Vorname ist erforderlich.
                                </div>
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('first_name')?.errors?.['minlength']"
                                >
                                    Vorname ist zu kurz.
                                </div>
                            </div>
                            <div class="col-6 ps-1">
                                <label 
                                    for="last_name" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['last_name']"
                                >Name</label>
                                <input 
                                    type="text" 
                                    class="form-control form-control-sm" 
                                    id="last_name" 
                                    formControlName="last_name"
                                    [class.is-invalid]="userProfilesForm.get('last_name')?.errors && userProfilesForm.get('last_name')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('last_name')?.errors && userProfilesForm.get('last_name')?.touched"
                                >
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('last_name')?.errors?.['required']"
                                >
                                    Nachname ist erforderlich.
                                </div>
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('last_name')?.errors?.['minlength']"
                                >
                                    Nachname ist zu kurz.
                                </div>
                            </div>
                        </div>
                        
                        <!-- Row 3: Geburtsdatum and Firma -->
                        <div class="row">
                            <div class="col-4 pe-1">
                                <label 
                                    for="date_of_birth" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['birthdate']"
                                >Geburtsdatum</label>
                                <input 
                                    type="date" 
                                    class="form-control form-control-sm" 
                                    id="date_of_birth"
                                    formControlName="birthdate"
                                    [class.is-invalid]="userProfilesForm.get('birthdate')?.errors && userProfilesForm.get('birthdate')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('birthdate')?.errors && userProfilesForm.get('birthdate')?.touched"
                                >
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('birthdate')?.errors?.['dateInvalid']"
                                >
                                    Ungültiges Datum.
                                </div>
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('birthdate')?.errors?.['dateInvalidFormat']"
                                >
                                    Ungültiges Datumsformat. Verwenden Sie das Format JJJJ-MM-TT.
                                </div>
                            </div>
                            <div class="col-8 ps-1" formGroupName="employee_details">
                                <label 
                                    for="company" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['employee_details.company']"
                                >Firma</label>
                                <input 
                                    type="text" 
                                    class="form-control form-control-sm" 
                                    id="company" 
                                    formControlName="company"
                                    [class.is-invalid]="userProfilesForm.get('employee_details.company')?.errors && userProfilesForm.get('employee_details.company')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.company')?.errors && userProfilesForm.get('employee_details.company')?.touched"
                                >
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('employee_details.company')?.errors?.['minlength']"
                                >
                                    Der Name der Firma muss mindestens 2 Zeichen lang sein.
                                </div>
                            </div>
                        </div>
                    </form>
                    <form [formGroup]="userProfilesForm"> 
                        <ng-container formArrayName="addresses"> 
                            <ng-container *ngFor="let address of addresses.controls; let i = index" [formGroupName]="i" > 
                                <!-- Row 4: Straße and H-Nr. -->
                                <div class="row">
                                    <div class="col-8 pe-1">
                                        <label 
                                            for="street" 
                                            class="form-label custom-label-sm"
                                            [class.required]="requiredStatus['addresses[' + i + '].street']"
                                        >Straße</label>
                                        <input 
                                            type="text" 
                                            class="form-control form-control-sm" 
                                            id="street" 
                                            formControlName="street"
                                            [class.is-invalid]="address.get('street')?.errors && address.get('street')?.touched"
                                            [class.is-valid]="!address.get('street')?.errors && address.get('street')?.touched"
                                        >
                                        <div 
                                            class="invalid-feedback custom-invalid-feedback"
                                            *ngIf="address.get('street')?.errors?.['minlength']"
                                        >
                                            Straße ist zu kurz.
                                        </div>
                                    </div>
                                    <div class="col-4 ps-1">
                                        <label 
                                            for="house_nr" 
                                            class="form-label custom-label-sm"
                                            [class.required]="requiredStatus['addresses[' + i + '].house_number']"
                                        >Haus-Nr.</label>
                                        <input 
                                            type="text" 
                                            class="form-control form-control-sm" 
                                            id="house_nr" 
                                            formControlName="house_number"
                                            [class.is-invalid]="address.get('house_number')?.errors && address.get('house_number')?.touched"
                                            [class.is-valid]="!address.get('house_number')?.errors && address.get('house_number')?.touched"
                                        >
                                        <div 
                                            class="invalid-feedback custom-invalid-feedback"
                                            *ngIf="address.get('house_number')?.errors?.['pattern']"
                                        >
                                            Ungültige Hausnummer.
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Row 5: PLZ and Ort -->
                                <div class="row">
                                    <div class="col-4 pe-1">
                                        <label 
                                            for="plz" 
                                            class="form-label custom-label-sm"
                                            [class.required]="requiredStatus['addresses[' + i + '].zip']"
                                        >PLZ</label>
                                        <input 
                                            type="text" 
                                            class="form-control form-control-sm" 
                                            id="plz" 
                                            formControlName="zip"
                                            [class.is-invalid]="address.get('zip')?.errors && address.get('zip')?.touched"
                                            [class.is-valid]="!address.get('zip')?.errors && address.get('zip')?.touched"
                                        >
                                        <div 
                                            class="invalid-feedback custom-invalid-feedback"
                                            *ngIf="address.get('zip')?.errors?.['pattern']"
                                        >
                                            Ungültige PLZ.
                                        </div>
                                    </div>
                                    <div class="col-8 ps-1">
                                        <label 
                                            for="city" 
                                            class="form-label custom-label-sm"
                                            [class.required]="requiredStatus['addresses[' + i + '].city']"
                                        >Ort</label>
                                        <input 
                                            type="text" 
                                            class="form-control form-control-sm" 
                                            id="city" 
                                            formControlName="city"
                                            [class.is-invalid]="address.get('city')?.errors && address.get('city')?.touched"
                                            [class.is-valid]="!address.get('city')?.errors && address.get('city')?.touched"
                                        >
                                        <div 
                                            class="invalid-feedback custom-invalid-feedback"
                                            *ngIf="address.get('city')?.errors?.['minlength']"
                                        >
                                            Ort ist zu kurz.
                                        </div>
                                    </div>
                                </div>
                            </ng-container>
                        </ng-container> 
                    </form>
                </div>
            </app-card>
            <!-- END Stammdaten -->

            <!-- Kommunikation -->
            <app-card>
                <div card-header>Kommunikation</div>
                <div card-body>
                    <form [formGroup]="userProfilesForm">
                        <ng-container formArrayName="contacts">                                       
                            <div  class="row" *ngFor="let contact of contacts.controls; let i = index" [formGroupName]="i" >
                                <div class="col-4 pe-1">                                        
                                    <label 
                                        for='prefix_phone-{{i}}' 
                                        class="form-label custom-label-sm"
                                        [class.required]="requiredStatus['contacts[' + i + '].prefix']"
                                    >Vorwahl</label>
                                    <input 
                                        type="text" 
                                        id='prefix_phone-{{i}}'
                                        autocomplete="off" 
                                        class="form-control form-control-sm"  
                                        formControlName="prefix"
                                        [class.is-invalid]="contact.get('prefix')?.errors && contact.get('prefix')?.touched"
                                        [class.is-valid]="!contact.get('prefix')?.errors && contact.get('prefix')?.touched"
                                    >
                                    <div 
                                        class="invalid-feedback custom-invalid-feedback"
                                        *ngIf="contact.get('prefix')?.errors?.['pattern']"
                                    >
                                        Nur Zahlen sind für die Vorwahl erlaubt.
                                    </div>
                                </div>
                                <div class="col-8 ps-1" *ngIf="contact.get('user_profile_contact_type_id')?.value == 1">
                                    <label 
                                        for='tel_number-{{i}}' 
                                        class="form-label custom-label-sm"
                                        [class.required]="requiredStatus['contacts[' + i + '].number']"
                                    >Tel. Nummer</label>
                                    <div class="input-group">
                                        <input 
                                            type="text" 
                                            id='tel_number-{{i}}' 
                                            class="form-control form-control-sm" 
                                            formControlName="number"
                                            [class.is-invalid]="contact.get('number')?.errors && contact.get('number')?.touched"
                                            [class.is-valid]="!contact.get('number')?.errors && contact.get('number')?.touched"
                                        >
                                        <span class="input-group-text" ><i class="fas fa-phone"></i></span>
                                        <div 
                                            class="invalid-feedback custom-invalid-feedback"
                                            *ngIf="contact.get('number')?.errors?.['pattern']"
                                        >
                                            Nur Zahlen sind für die Nummer erlaubt.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-8 ps-1" *ngIf="contact.get('user_profile_contact_type_id')?.value == 2">
                                    <label 
                                        for='mobil_number-{{i}}' 
                                        class="form-label custom-label-sm"
                                        [class.required]="requiredStatus['contacts[' + i + '].number']"
                                    >Mobil. Nr</label>
                                    <div class="input-group">
                                        <input 
                                            type="text" 
                                            id='mobil_number-{{i}}' 
                                            class="form-control form-control-sm" 
                                            formControlName="number" 
                                            [class.is-invalid]="contact.get('number')?.errors && contact.get('number')?.touched"
                                            [class.is-valid]="!contact.get('number')?.errors && contact.get('number')?.touched"
                                        >
                                        <span class="input-group-text" ><i class="fa-solid fa-mobile-screen-button"></i></span>
                                        <div 
                                            class="invalid-feedback custom-invalid-feedback"
                                            *ngIf="contact.get('number')?.errors?.['pattern']"
                                        >
                                            Nur Zahlen sind für die Nummer erlaubt.
                                        </div>
                                    </div>
                                </div>
                            </div> 
                        </ng-container>  
                    </form>
                    <form [formGroup]="userProfilesForm">                                
                        <div class="row">
                            <div class="col-12">
                                <label 
                                    for="email" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['email']"
                                >E-Mail</label>
                                <div class="input-group">                     
                                    <input 
                                        type="email" 
                                        class="form-control form-control-sm" 
                                        id="email" 
                                        formControlName="email"
                                        [class.is-invalid]="userProfilesForm.get('email')?.errors && userProfilesForm.get('email')?.touched"
                                        [class.is-valid]="!userProfilesForm.get('email')?.errors && userProfilesForm.get('email')?.touched"
                                    >
                                    <span class="input-group-text"><i class="fa-solid fa-at"></i></span>
                                    <div 
                                        class="invalid-feedback custom-invalid-feedback"
                                        *ngIf="userProfilesForm.get('email')?.errors?.['required']"
                                    >
                                        E-Mail ist erforderlich.
                                    </div>
                                    <div 
                                        class="invalid-feedback custom-invalid-feedback"
                                        *ngIf="userProfilesForm.get('email')?.errors?.['email']"
                                    >
                                        Ungültige E-Mail-Adresse.
                                    </div>
                                    <div 
                                        class="invalid-feedback custom-invalid-feedback"
                                        *ngIf="userProfilesForm.get('email')?.errors?.['emailExists']"
                                    >
                                        Die E-Mail-Adresse ist bereits vergeben
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </app-card>
            <!--END Kommunikation -->
            <!-- Bankdaten -->
            <app-card>
                <div card-header>Bankdaten</div>
                <div card-body>
                    <form [formGroup]="userProfilesForm"> 
                        <ng-container formArrayName="banks"> 
                            <ng-container *ngFor="let bank of banks.controls; let i = index" [formGroupName]="i" >
                                <div class="row">
                                    <div class="col-3 pe-1">
                                        <label 
                                            for="anrede-bank" 
                                            class="form-label custom-label-sm"
                                            [class.required]="requiredStatus['banks[' + i + '].salutation']"
                                        >Anrede</label>
                                        <select 
                                            id="anrede-bank" 
                                            class="form-select form-select-sm"
                                            formControlName="salutation"
                                            [class.is-invalid]="bank.get('salutation')?.errors && bank.get('salutation')?.touched"
                                            [class.is-valid]="!bank.get('salutation')?.errors && bank.get('salutation')?.touched"
                                        >
                                            <option value="Herr">Herr</option>
                                            <option value="Frau">Frau</option>
                                        </select>
                                    </div>
                                    <div class="col-5 pe-1 ps-1">
                                        <label 
                                            for="last_name" 
                                            class="form-label custom-label-sm"
                                            [class.required]="requiredStatus['banks[' + i + '].last_name']"
                                        >Name</label>
                                        <input 
                                            type="text" 
                                            class="form-control form-control-sm" 
                                            id="last_name" 
                                            formControlName="last_name"
                                            [class.is-invalid]="bank.get('last_name')?.errors && bank.get('last_name')?.touched"
                                            [class.is-valid]="!bank.get('last_name')?.errors && bank.get('last_name')?.touched"
                                        >
                                        <div 
                                            class="invalid-feedback custom-invalid-feedback"
                                            *ngIf="bank.get('last_name')?.errors?.['minlength']"
                                        >
                                            Nachname ist zu kurz.
                                        </div>
                                    </div>
                                    <div class="col-4 ps-1">
                                        <label 
                                            for="first_name" 
                                            class="form-label custom-label-sm"
                                            [class.required]="requiredStatus['banks[' + i + '].first_name']"
                                        >Vorname</label>
                                        <input 
                                            type="text" 
                                            class="form-control form-control-sm" 
                                            id="first_name" 
                                            formControlName="first_name"
                                            [class.is-invalid]="bank.get('first_name')?.errors && bank.get('first_name')?.touched"
                                            [class.is-valid]="!bank.get('first_name')?.errors && bank.get('first_name')?.touched"
                                        >
                                        <div 
                                            class="invalid-feedback custom-invalid-feedback"
                                            *ngIf="bank.get('first_name')?.errors?.['minlength']"
                                        >
                                            Vorname ist zu kurz.
                                        </div>
                                    </div>
                                </div>
                                <div class="row ">
                                    <div class="col-8 pe-1">
                                        <label 
                                            for="iban" 
                                            class="form-label custom-label-sm"
                                            [class.required]="requiredStatus['banks[' + i + '].iban']"
                                        >IBAN</label>
                                        <input 
                                            autocomplete="off" 
                                            class="form-control  form-control-sm" 
                                            id="iban"  
                                            type="text"
                                            formControlName="iban"
                                            [class.is-invalid]="bank.get('iban')?.errors && bank.get('iban')?.touched"
                                            [class.is-valid]="!bank.get('iban')?.errors && bank.get('iban')?.touched"
                                        >
                                        <div 
                                            class="invalid-feedback custom-invalid-feedback"
                                            *ngIf="bank.get('iban')?.errors?.['pattern']"
                                        >
                                            Ungültige IBAN.
                                        </div>
                                    </div>
                                    <div class="col-4 ps-1">
                                        <label 
                                            for="bic" 
                                            class="form-label custom-label-sm"
                                            [class.required]="requiredStatus['banks[' + i + '].bic']"
                                        >BIC</label>
                                        <input 
                                            autocomplete="off" 
                                            class="form-control  form-control-sm" 
                                            id="bic" 
                                            type="text"
                                            formControlName="bic"
                                            [class.is-invalid]="bank.get('bic')?.errors && bank.get('bic')?.touched"
                                            [class.is-valid]="!bank.get('bic')?.errors && bank.get('bic')?.touched"
                                        >
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-8 pe-1">
                                        <label 
                                            for="bank" 
                                            class="form-label custom-label-sm"
                                            [class.required]="requiredStatus['banks[' + i + '].bank_name']"
                                        >Bank</label>
                                        <input 
                                            autocomplete="off" 
                                            class="form-control  form-control-sm" 
                                            id="bank" 
                                            type="text"
                                            formControlName="bank_name"
                                            [class.is-invalid]="bank.get('bank_name')?.errors && bank.get('bank_name')?.touched"
                                            [class.is-valid]="!bank.get('bank_name')?.errors && bank.get('bank_name')?.touched"
                                        >
                                        <div 
                                            class="invalid-feedback custom-invalid-feedback"
                                            *ngIf="bank.get('iban')?.errors?.['minlength']"
                                        >
                                            Bankname ist zu kurz.
                                        </div>
                                    </div>
                                    <div class="col-4 ps-1">
                                        <label 
                                            for="country" 
                                            class="form-label custom-label-sm"
                                            [class.required]="requiredStatus['banks[' + i + '].country']"
                                        >Land</label>
                                        <select 
                                            class="form-select form-select-sm" 
                                            id="country"
                                            formControlName="country"
                                        >
                                            <option value="Germany">DE</option>                                                            
                                        </select>
                                    </div>
                                </div>
                            </ng-container>
                        </ng-container>                                                                    
                    </form>
                </div>
            </app-card>
            <!--END Bankdaten -->
        </div>
        <div class="col-6 ps-1 pe-2 pt-2 pb-2">
            <app-card>
                <div card-header>Karriere und Struktur</div>
                <div card-body>
                    <form [formGroup]="userProfilesForm">
                        <div class="row ">
                            <div class="col pe-1" formGroupName="employee_details">
                                <label 
                                    for="status" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['employee_details.status_id']"
                                >Status</label>
                                <select 
                                    class="form-select form-select-sm" 
                                    id="status"
                                    formControlName="status_id"
                                    [class.is-invalid]="userProfilesForm.get('employee_details.status_id')?.errors && userProfilesForm.get('employee_details.status_id')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.status_id')?.errors && userProfilesForm.get('employee_details.status_id')?.touched"
                                >
                                    <option *ngFor="let status of statuses" [value]="status.id">{{status.name}}</option> 
                                </select>
                            </div>
                            <div class="col-3 pe-1 ps-1" formGroupName="employee_details">
                                <label 
                                    for="stufe" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['employee_details.career_id']"
                                >Stufe</label>
                                <select 
                                    class="form-select form-select-sm" 
                                    id="stufe"
                                    formControlName="career_id"
                                    [class.is-invalid]="userProfilesForm.get('employee_details.career_id')?.errors && userProfilesForm.get('employee_details.career_id')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.career_id')?.errors && userProfilesForm.get('employee_details.career_id')?.touched"
                                >
                                    <option *ngFor="let career of careers" [value]="career.id" >{{career.stages_description}}</option>
                                </select>
                            </div>
                            <div class="col ps-1" formGroupName="employee_details">
                                <label 
                                    for="categorie" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['employee_details.categorie_id']"
                                >Kategorie</label>
                                <select 
                                    class="form-select form-select-sm" 
                                    id="categorie"
                                    formControlName="categorie_id"
                                    [class.is-invalid]="userProfilesForm.get('employee_details.categorie_id')?.errors && userProfilesForm.get('employee_details.categorie_id')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.categorie_id')?.errors && userProfilesForm.get('employee_details.categorie_id')?.touched"
                                >
                                    <option *ngFor="let categorie of categories" [value]="categorie.id">{{categorie.name}}</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-8 pe-1">
                                <label 
                                    for="leadership" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['parent']"
                                >Führung</label>
                                <input 
                                    autocomplete="off" 
                                    class="form-control  form-control-sm search-input" 
                                    id="leadership"  
                                    type="text"
                                    [(ngModel)]="displayParentData"
                                    [ngbTypeahead]="search"
                                    [inputFormatter]="formatter"
                                    [resultFormatter]="formatter"
                                    (ngModelChange)="selectedParentEmployee()"
                                    (focus)="clearInput()"
                                    (blur)="restoreInputData()"
                                    [ngModelOptions]="{standalone: true}"
                                    
                                >
                                <!-- <div (ngModelChange)="onParentDataChange($event)"
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('parent')?.errors?.['pattern']"
                                > 
                                    Nur Zahlen sind erlaubt.
                                </div> -->
                            </div>
                            <div class="col-4 ps-1">
                                <label for="rek_status" class="form-label custom-label-sm">Rekrut. Satus</label>
                                <select class="form-select form-select-sm" id="rek_status" disabled>
                                    <option selected="">gek. -&gt; WV</option>
                                    <option>UVP</option>
                                </select>
                            </div>
                        </div>
                        <!-- <div class="row">
                            <div class="col-8 pe-1">
                                <label 
                                    for="leadership" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['parent']"
                                >Führung</label>
                                <input 
                                    autocomplete="off" 
                                    class="form-control  form-control-sm" 
                                    id="leadership"  
                                    type="text"
                                    formControlName="parent"
                                    [class.is-invalid]="userProfilesForm.get('parent')?.errors && userProfilesForm.get('parent')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('parent')?.errors && userProfilesForm.get('parent')?.touched"
                                >
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('parent')?.errors?.['pattern']"
                                > 
                                    Nur Zahlen sind erlaubt.
                                </div>
                            </div>
                            <div class="col-4 ps-1">
                                <label for="rek_status" class="form-label custom-label-sm">Rekrut. Satus</label>
                                <select class="form-select form-select-sm" id="rek_status" disabled>
                                    <option selected="">gek. -&gt; WV</option>
                                    <option>UVP</option>
                                </select>
                            </div>
                        </div> -->
                    </form>
                </div>
            </app-card>
            <app-card>
                <div card-header>Legitimation</div>
                <div card-body>
                    <form [formGroup]="userProfilesForm">
                        <div class="row ">
                            <div class="col-6 pe-1" formGroupName="employee_details">
                                <label 
                                    for="partner_input" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['employee_details.entrance']"
                                >Eingang</label>
                                <input 
                                    autocomplete="off" 
                                    class="form-control form-control-sm" 
                                    id="partner_input" 
                                    type="date"
                                    formControlName="entrance"
                                    [class.is-invalid]="userProfilesForm.get('employee_details.entrance')?.errors && userProfilesForm.get('employee_details.entrance')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.entrance')?.errors && userProfilesForm.get('employee_details.entrance')?.touched"
                                >
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('employee_details.entrance')?.errors?.['dateInvalid']"
                                >
                                    Ungültiges Eingangsdatum.
                                </div>
                                
                            </div>
                            <div class="form_check pt-4 col-6 ps-1" formGroupName="employee_details">
                                <input 
                                    id="pass" 
                                    type="checkbox"
                                    formControlName="id_card"
                                    [class.is-invalid]="userProfilesForm.get('employee_details.id_card')?.errors && userProfilesForm.get('employee_details.id_card')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.id_card')?.errors && userProfilesForm.get('employee_details.id_card')?.touched"
                                >
                                <label for="pass">Personalausw.</label>
                            </div>
                        </div>   
                        <div class="row ">
                            <div class="col-6 pe-1" formGroupName="employee_details">
                                <label 
                                    for="partner_entry" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['employee_details.entry']"
                                >Eintritt</label>
                                <input 
                                    autocomplete="off" 
                                    class="form-control form-control-sm" 
                                    id="partner_entry" 
                                    type="date"
                                    formControlName="entry"
                                    [class.is-invalid]="userProfilesForm.get('employee_details.entry')?.errors && userProfilesForm.get('employee_details.entry')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.entry')?.errors && userProfilesForm.get('employee_details.entry')?.touched"
                                >
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('employee_details.entry')?.errors?.['dateInvalid']"
                                >
                                    Ungültiges Eintrittsdatum.
                                </div>
                                
                            </div>
                            <div class="form_check pt-4 col-6 ps-1" formGroupName="employee_details">
                                <input 
                                    id="ust_nachw" 
                                    type="checkbox"
                                    formControlName="vat_liability_proven"
                                    [class.is-invalid]="userProfilesForm.get('employee_details.vat_liability_proven')?.errors && userProfilesForm.get('employee_details.vat_liability_proven')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.vat_liability_proven')?.errors && userProfilesForm.get('employee_details.vat_liability_proven')?.touched"
                                >
                                <label for="ust_nachw">UST-Pfl. Nachw.</label>
                            </div>
                        </div> 
                        <div class="row ">
                            <div class="col-6 pe-1" formGroupName="employee_details">
                                <label 
                                    for="partner_exit" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['employee_details.exit']"
                                >Austritt</label>
                                <input 
                                    autocomplete="off" 
                                    class="form-control form-control-sm" 
                                    id="partner_exit" 
                                    type="date"
                                    formControlName="exit"
                                    [class.is-invalid]="userProfilesForm.get('employee_details.exit')?.errors && userProfilesForm.get('employee_details.exit')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.exit')?.errors && userProfilesForm.get('employee_details.exit')?.touched"
                                >
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('employee_details.exit')?.errors?.['dateInvalid']"
                                >
                                    Ungültiges Austrittsdatum.
                                </div>
                            </div>
                            <div class="form_check pt-4 col-6 ps-1" formGroupName="employee_details">
                                <input 
                                    id="business_reg" 
                                    type="checkbox"
                                    formControlName="business_registration"
                                    [class.is-invalid]="userProfilesForm.get('employee_details.business_registration')?.errors && userProfilesForm.get('employee_details.business_registration')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.business_registration')?.errors && userProfilesForm.get('employee_details.business_registration')?.touched"
                                >
                                <label for="business_reg">Gewerbeanm.</label>
                            </div>
                        </div> 
                    </form>
                </div>
            </app-card>
            <app-card>
                <div card-header>Steuerdaten</div>
                <div card-body>
                    <form [formGroup]="userProfilesForm">
                        <div class="row ">
                            <div class="col-6 pe-1" formGroupName="employee_details">
                                <label 
                                    for="tax_office" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['employee_details.tax_office']"
                                >Finanzamt</label>
                                <input 
                                    autocomplete="off" 
                                    class="form-control  form-control-sm" 
                                    id="tax_office"  
                                    type="text"
                                    formControlName="tax_office"
                                    [class.is-invalid]="userProfilesForm.get('employee_details.tax_office')?.errors && userProfilesForm.get('employee_details.tax_office')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.tax_office')?.errors && userProfilesForm.get('employee_details.tax_office')?.touched"
                                >
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('employee_details.tax_office')?.errors?.['minlength']"
                                >
                                 Das Finanzamt muss mindestens 2 Zeichen lang sein.
                                </div>
                            </div>
                            <div class="form_check pt-4 col-6 ps-1" formGroupName="employee_details">
                                <input 
                                    id="ust" 
                                    type="checkbox"
                                    formControlName="sales_tax_liability"
                                >
                                <label for="ust">UST-Plichtig</label>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-6 pe-1" formGroupName="employee_details">
                                <label 
                                    for="steuer_nr" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['employee_details.tax_number']"
                                >Steuer-Nr</label>
                                <input 
                                    autocomplete="off" 
                                    class="form-control  form-control-sm" 
                                    id="steuer_nr"  
                                    type="text"
                                    formControlName="tax_number"
                                    [class.is-invalid]="userProfilesForm.get('employee_details.tax_number')?.errors && userProfilesForm.get('employee_details.tax_number')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.tax_number')?.errors && userProfilesForm.get('employee_details.tax_number')?.touched"
                                >
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('employee_details.tax_number')?.errors?.['pattern']"
                                >
                                    Ungültige Steuernummer. Überprüfen Sie das Format und die Ziffern.
                                </div>
                            </div>
                            <div class="col-6 ps-1" formGroupName="employee_details">
                                <label 
                                    for="steuer_id" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['employee_details.tax_id']"
                                >Steuer-ID</label>
                                <input 
                                    autocomplete="off" 
                                    class="form-control  form-control-sm" 
                                    id="steuer_id"  
                                    type="text"
                                    formControlName="tax_id"
                                    [class.is-invalid]="userProfilesForm.get('employee_details.tax_id')?.errors && userProfilesForm.get('employee_details.tax_id')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.tax_id')?.errors && userProfilesForm.get('employee_details.tax_id')?.touched"
                                >
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('employee_details.tax_id')?.errors?.['pattern']"
                                >
                                    Ungültige Steuer-ID. Überprüfen Sie das Format und die Ziffern.
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12" formGroupName="employee_details">
                                <label 
                                    for="datev_nr" 
                                    class="form-label custom-label-sm"
                                    [class.required]="requiredStatus['employee_details.datev_no']"
                                >DATEV-Nr</label>
                                <input 
                                    autocomplete="off" 
                                    class="form-control  form-control-sm" 
                                    id="datev_nr" 
                                    type="text"
                                    formControlName="datev_no"
                                    [class.is-invalid]="userProfilesForm.get('employee_details.datev_no')?.errors && userProfilesForm.get('employee_details.datev_no')?.touched"
                                    [class.is-valid]="!userProfilesForm.get('employee_details.datev_no')?.errors && userProfilesForm.get('employee_details.datev_no')?.touched"
                                >
                                <div 
                                    class="invalid-feedback custom-invalid-feedback"
                                    *ngIf="userProfilesForm.get('employee_details.datev_no')?.errors?.['pattern']"
                                >
                                    Ungültige DATEV-Nummer.
                                </div>
                            </div>         
                        </div>
                    </form>
                </div>
            </app-card>
            <app-card>
                <div card-header>Abrechnung</div>
                <div card-body>
                    <form [formGroup]="userProfilesForm">
                        <div class="row ">
                            <div class="form_check inverse  pt-2 col-6 pe-1" formGroupName="employee_details">
                                <input 
                                    id="abr_block" 
                                    type="checkbox"
                                    formControlName="billing_blocked"
                                >
                                <label for="abr_block">Abr. sperren</label>
                            </div>
                            <div class="form_check inverse pt-2 col-6 ps-1"  formGroupName="employee_details">
                                <input 
                                    id="ausz_block" 
                                    type="checkbox"
                                    formControlName="payout_blocked"
                                >
                                <label for="ausz_block">Ausz. sperren</label>
                            </div>
                        </div>
                    </form>
                </div>
            </app-card>
            <app-card>
                <div card-header>Externe Vertrieb</div>
                <div card-body>
                    <form>
                        <div class="row pt-1">
                            <label class="custom-label-sm col-form-label ml-3 col-6 pe-1" for="head_prov" style="line-height: 29px; padding-left: 0.8rem;">Reine Kopfprovision</label>
                            <div class="col-6 ps-1">
                                <input autocomplete="off" disabled class="form-control form-control-sm" id="head_prov" placeholder="Kopfprovision" type="text">
                            </div>                                       
                        </div>
                    </form>
                </div>
            </app-card>
        </div>
    </div> 
</ng-container>
<ng-template #defaulContent>
    <div class="row no-gutters default-content">
        <div class="col">
            <div class="d-flex justify-content-center default-user-profile">
                <i class="fa-solid fa-users"></i>
            </div>
            <div class="d-flex justify-content-center default-user-profile-title">
                Partner 
            </div>
        </div>
    </div>
</ng-template>
