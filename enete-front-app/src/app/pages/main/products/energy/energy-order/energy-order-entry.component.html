
<app-rate-overview [orderEntryRate]="orderEntryRate"></app-rate-overview>

<div class="row tarif-process-nav-wrap d-none d-lg-flex">
  <div class="tarif-process-nav">
    <div class="col step">
      <button class="btn"
              [class.success_step]="steps[0].success"
              [class.error_step]="steps[0].error"
              [class.active]="activeStep.id == 1"
              (click)="getStepById(1)">
        <div class="step-icon"><i class="fas fa-check-circle"></i></div>
        <div class="step-name">Tarifauswahl</div>
      </button>
    </div>
    <div class="col">
      <hr class="line">
    </div>
    <div class="col step">
      <button class="btn"
              [class.success_step]="activeStep.id != 2 && steps[1].success"
              [class.error_step]="activeStep.id != 2 && steps[1].error"
              [class.active]="activeStep.id == 2"
              (click)="getStepById(2)">
        <div *ngIf="activeStep.id != 2 && steps[1].success" class="step-icon"><i class="fas fa-check-circle"></i></div>
        <div *ngIf="activeStep.id != 2 && steps[1].error" class="step-icon"><i class="fas fa-times-circle"></i></div>
        <div *ngIf="(!steps[1].error && !steps[1].success) || activeStep.id == 2" class="step-icon"><i class="circle-step">2</i></div>
        <div class="step-name">PersÃ¶nliche Daten</div>
      </button>
    </div>
    <div class="col">
      <hr class="line">
    </div>
    <div class="col step">
      <button class="btn"
              [class.success]="activeStep.id != 3 && steps[2].success"
              [class.error_step]="activeStep.id != 3 && steps[2].error"
              [class.active]="activeStep.id == 3"
              (click)="getStepById(3)">
        <div *ngIf="activeStep.id != 3 && steps[2].success" class="step-icon"><i class="fas fa-check-circle"></i></div>
        <div *ngIf="activeStep.id != 3 && steps[2].error" class="step-icon"><i class="fas fa-times-circle"></i></div>
        <div *ngIf="(!steps[2].error && !steps[2].success) || activeStep.id == 3" class="step-icon"><i class="circle-step">3</i></div>
        <div class="step-name">Bankdaten & Rechnung</div>
      </button>
    </div>
    <div class="col">
      <hr class="line">
    </div>
    <div class="col step">
      <button class="btn"
              [class.success_step]="activeStep.id != 4 && steps[3].success"
              [class.error_step]="activeStep.id != 4 && steps[3].error"
              [class.active]="activeStep.id == 4"
              (click)="getStepById(4)">
        <div *ngIf="activeStep.id != 4 && steps[3].success" class="step-icon"><i class="fas fa-check-circle"></i></div>
        <div *ngIf="activeStep.id != 4 && steps[3].error" class="step-icon"><i class="fas fa-times-circle"></i></div>
        <div *ngIf="(!steps[3].error && !steps[3].success) || activeStep.id == 4" class="step-icon"><i class="circle-step">4</i></div>
        <div class="step-name">Liefertermin & Vorversorger</div>
      </button>
    </div>
    <div class="col">
      <hr class="line">
    </div>
    <div class="col step">
      <button class="btn"
              [class.success_step]="activeStep.id != 5 && steps[4].success"
              [class.error_step]="activeStep.id != 5 && steps[4].error"
              [class.active]="activeStep.id == 5"
              (click)="getStepById(5)">
        <div *ngIf="activeStep.id != 5 && steps[4].success" class="step-icon"><i class="fas fa-check-circle"></i></div>
        <div *ngIf="activeStep.id != 5 && steps[4].error" class="step-icon"><i class="fas fa-times-circle"></i></div>
        <div *ngIf="(!steps[4].error && !steps[4].success) || activeStep.id == 5" class="step-icon"><i class="circle-step">5</i></div>
        <div class="step-name">Abschliessen</div>
      </button>
    </div>
  </div>
</div>

<div *ngIf="isBeforeProvidersLoaded && isLegalFormsLoaded" class="row">
  <div class="tarif_forms_wrap mb-3">
    <div class="col-12 col-lg-7 order-12 order-lg-1">
      <app-personal-data-step *ngIf="activeStep.id == 2"
                              [form]="personalDataForm"
                              [type]="type"
                              [legalForm]="legalForms"
                              [nextStepStatus]="nextStepEnabled"
                              [backStepStatus]="backStepEnabled"
                              (next)="getNextStep()"
                              (back)="getBackStep()"></app-personal-data-step>
      <app-bank-data-step *ngIf="activeStep.id == 3"
                          [BankDataForm]="bankDataForm"
                          [PersonalDataForm]="personalDataForm"
                          [DifferentAdressForm]="differentAddressForm"
                          [nextStepStatus]="nextStepEnabled"
                          [backStepStatus]="backStepEnabled"
                          (next)="getNextStep()"
                          (back)="getBackStep()"></app-bank-data-step>
        <!-- <app-pre-supplier-data-step *ngIf="activStep.id == 4"
                                  [PreSupplierDataForm]="preSupplierData"
                                  [BeforeProvider]="beforeProvider"
                                  [CompanyName]="companyName"
                                  [nextStepStatus]="nextStep"
                                  [backStepStatus]="backStep"
                                  (next)="getNextStep()"
                                  (back)="getBackStep()"></app-pre-supplier-data-step>
      <app-final-step *ngIf="activStep.id == 5"
                      [PersonalDataForm]="personalDataForm"
                      [BankDataForm]="banckDataForm"
                      [DifferentAdressForm]="differentAdressForm"
                      [PreSupplierDataForm]="preSupplierData"
                      [ContractFinalForm]="contractFinalForm"
                      [CompanyName]="companyName"
                      [RateName]="rateName"
                      (getStepById)="getStepById($event)"
                      (createOrder)="createOrder()"
                      (back)="getBackStep()"
                      ></app-final-step> -->
    </div>
    <div class="col-12 col-lg-5 order-1 order-lg-1">
      <!-- <app-actions-order
                         [PersonalDataForm]="personalDataForm"
                         [PreSupplierDataForm]="preSupplierData"
                         (getStepById)="getStepById($event)"
                         (contractPark)="createOrder($event)"
                         ></app-actions-order> -->
    </div>
  </div>
</div>

<app-linear-loader 
                class="preloader" 
                *ngIf="!isBeforeProvidersLoaded || !isLegalFormsLoaded || isSending"
                [dot]="false"
                [width]="12"
                [color]="'#7D1120'">
</app-linear-loader>



